services:
  n8n:
    # image: n8nio/n8n:latest
    build: .
    restart: unless-stopped
    ports:
      - "5678:5678" # Forward the n8n port to your local machine
    environment:
      - N8N_HOST=localhost
      - N8N_PORT=5678
      - N8N_PROTOCOL=http
      - N8N_ENCRYPTION_KEY={N8N_ENCRYPTION_KEY}
    volumes:
      # Persist n8n data, credentials, and workflows between container restarts
      - n8n_data:/home/node/.n8n
      # Mount a folder to easily export/import workflows from your git repo
      - ./data:/data
      # Workflows folder to sync with your local machine
      - ./workflows:/usr/src/app/workflows

volumes:
  n8n_data: